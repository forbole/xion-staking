(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67617:function(e,r,i){Promise.resolve().then(i.bind(i,30014))},30014:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return f}});var s=i(3827),d=i(52674),t=i(59115),l=i(8792),n=i(64090),a=i(86123),c=i(94108),o=i(80469),u=i(66803),h=i(9016),v=i(61947),x=i(18722),m=()=>{let[e,r]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{var e;let i=localStorage.getItem("xion-authz-temp-account");if(!i)return;let s=await x.DirectSecp256k1HdWallet.deserialize(i,"abstraxion"),d=await s.getAccounts(),t=null==d?void 0:null===(e=d[0])||void 0===e?void 0:e.address;t&&r(t)})()},[]),e)?(0,s.jsx)(l.default,{href:"https://explorer.burnt.com/".concat(h.Bv,"/account/").concat(e),target:"_blank",children:(0,s.jsx)(t.z,{onClick:()=>{},children:"DEBUG ACCOUNT"})}):null};let j=e=>{let{disabled:r,onStake:i,validator:d}=e,{website:a}=d.description,[c,o]=(0,n.useState)(null),{identity:u}=d.description;return(0,n.useEffect)(()=>{(async()=>{u&&o(await v.x.getIdentityLogo(u))})()},[u]),(0,s.jsxs)("div",{style:{border:"solid 1px white",marginBottom:10},children:[c&&(0,s.jsx)("div",{children:(0,s.jsx)("img",{alt:"Validator logo",src:c,style:{height:50,width:50}})}),(0,s.jsxs)(l.default,{href:"/validator?address=".concat(d.operatorAddress),children:[(0,s.jsx)("div",{children:(0,s.jsx)("b",{children:d.description.moniker})}),(0,s.jsx)("div",{children:d.operatorAddress})]}),(0,s.jsx)("div",{children:(0,s.jsx)(t.z,{disabled:r,onClick:i,structure:"naked",children:"Stake here"})}),a&&(0,s.jsx)("div",{children:(0,s.jsx)(l.default,{href:a,target:"_blank",children:a})})]})};var f=(0,n.memo)(function(){let{account:e,staking:r}=(0,o.n)(),[i,v]=(0,n.useState)(!1),{delegations:x,isInfoLoading:f,tokens:p,unbondings:g,validators:b}=r.state,{client:k}=(0,d.Hj)(),[,A]=(0,d.dd)(),y=(0,n.useMemo)(()=>(null==b?void 0:b.items.reduce((e,r)=>(e[r.operatorAddress]=r,e),{}))||{},[b]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:"Account"}),(0,s.jsx)("div",{children:(0,s.jsx)("b",{children:e.bech32Address})}),(0,s.jsx)("div",{children:(0,s.jsx)(t.z,{onClick:()=>{A(!0)},children:"Open Settings"})}),p&&(0,s.jsxs)("div",{children:["Tokens: ",(0,s.jsx)("b",{children:(0,u.Em)(p)})]})]}),f&&(0,s.jsx)("div",{children:"Loading ..."}),!!(null==x?void 0:x.items.length)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"Delegations:"}),x.items.map(d=>{let l=y[d.validatorAddress],n=null==l?void 0:l.description.moniker;return(0,s.jsxs)("div",{style:{border:"1px solid #fff",marginBottom:20},children:[(0,s.jsxs)("div",{children:["Delegated: ",(0,u.Em)(d.balance)]}),d.rewards&&(0,s.jsxs)("div",{children:["Rewards: ",(0,u.Em)(d.rewards)]}),(0,s.jsxs)("div",{children:["Validator: ",n||d.validatorAddress]}),(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)(t.z,{disabled:i,onClick:()=>{if(!k||!l)return;v(!0);let i={delegator:e.bech32Address,validator:l.operatorAddress};(0,c.xu)(i,k,r).then(()=>{(0,a.Am)("Unstake successful",{type:"success"})}).catch(()=>{(0,a.Am)("Unstake error",{type:"error"})}).finally(()=>{v(!1)})},children:"Undelegate"}),d.rewards&&(0,s.jsx)(t.z,{disabled:i||"0"===d.rewards.amount,onClick:()=>{if(!k)return;v(!0);let i={delegator:e.bech32Address,validator:d.validatorAddress};(0,c.sT)(i,k,r).then(()=>{(0,a.Am)("Claim success",{type:"success"})}).catch(()=>{(0,a.Am)("Claim error",{type:"error"})}).finally(()=>{v(!1)})},children:"Claim rewards"}),(0,s.jsx)(t.z,{disabled:i,onClick:()=>{k&&(v(!0),(0,c.d7)(e.bech32Address,k,r).finally(()=>{v(!1)}))},children:"Redelelegate"})]})]},d.validatorAddress)})]}),!!(null==g?void 0:g.items.length)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"Unbondings:"}),(0,s.jsx)("div",{children:null==g?void 0:g.items.map(e=>{let r=y[e.validator];return(0,s.jsxs)("div",{style:{border:"1px solid #fff"},children:[(0,s.jsxs)("div",{children:["Unbonding tokens: ",(0,u.Em)(e.balance)]}),(0,s.jsxs)("div",{children:["Completed by:"," ",new Date(e.completionTime).toString()]}),(0,s.jsxs)("div",{children:["Validator:"," ",(null==r?void 0:r.description.moniker)||e.validator]})]},"".concat(e.completionTime,"-").concat(e.completionTimeNanos))})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsx)(l.default,{href:"https://explorer.burnt.com/".concat(h.Bv,"/account/").concat(e.bech32Address),target:"_blank",children:(0,s.jsx)(t.z,{onClick:()=>{},children:"VIEW ACCOUNT"})}),(0,s.jsx)(m,{})]}),!!(null==b?void 0:b.items.length)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"Validators:"}),(0,s.jsx)("div",{className:"max-h-[200px] max-w-max overflow-auto",children:b.items.map(d=>(0,s.jsx)(j,{disabled:i,onStake:()=>{if(!k)return;v(!0);let i={delegator:e.bech32Address,validator:d.operatorAddress};(0,c._5)(i,k,r).then(()=>{(0,a.Am)("Staking successful",{type:"success"})}).catch(()=>{(0,a.Am)("Staking error",{type:"error"})}).finally(()=>{v(!1)})},validator:d},d.operatorAddress))})]})]})})},61947:function(e,r,i){"use strict";i.d(r,{x:function(){return d}});let s={},d={getIdentityLogo:e=>{if(s[e])return s[e];let r=fetch("https://keybase.io/_/api/1.0/user/lookup.json?key_suffix=".concat(e)).then(e=>e.json()).then(e=>{var r,i,s,d;return(null==e?void 0:null===(d=e.them)||void 0===d?void 0:null===(s=d[0])||void 0===s?void 0:null===(i=s.pictures)||void 0===i?void 0:null===(r=i.primary)||void 0===r?void 0:r.url)||null}).catch(()=>null);return s[e]=r,r}}}},function(e){e.O(0,[350,218,147,228,933,45,792,123,658,971,69,744],function(){return e(e.s=67617)}),_N_E=e.O()}]);