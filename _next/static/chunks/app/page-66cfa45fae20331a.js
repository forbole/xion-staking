(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67617:function(e,t,n){Promise.resolve().then(n.bind(n,66319))},66319:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(3827),i=n(52674),s=n(59115),l=n(8792),d=n(64090),o=n(86123),a=n(25442),c=n(80469),u=n(39730),h=n(40168),v=n(66803),x=n(67497),m=n(18722),f=n(9016),j=()=>{let[e,t]=(0,d.useState)(null);return((0,d.useEffect)(()=>{(async()=>{var e;let n=localStorage.getItem("xion-authz-temp-account");if(!n)return;let r=await m.DirectSecp256k1HdWallet.deserialize(n,"abstraxion"),i=await r.getAccounts(),s=null==i?void 0:null===(e=i[0])||void 0===e?void 0:e.address;s&&t(s)})()},[]),e)?(0,r.jsx)(l.default,{href:"https://explorer.burnt.com/".concat(f.Bv,"/account/").concat(e),target:"_blank",children:(0,r.jsx)(s.z,{onClick:()=>{},children:"DEBUG ACCOUNT"})}):null},p=n(61947),g=(0,d.memo)(e=>{let{disabled:t,onStake:n,staking:i,validator:o}=e,{website:a}=o.description,[c,h]=(0,d.useState)(null),{identity:v}=o.description;(0,d.useEffect)(()=>{(async()=>{v&&h(await p.x.getIdentityLogo(v))})()},[v]);let m=(0,u.Sg)(null==o?void 0:o.tokens,i.state),f=(0,x.gg)(m);return(0,r.jsxs)("div",{style:{border:"solid 1px white",marginBottom:10},children:[c&&(0,r.jsx)("div",{children:(0,r.jsx)("img",{alt:"Validator logo",src:c,style:{height:50,width:50}})}),(0,r.jsxs)(l.default,{href:"/validator?address=".concat(o.operatorAddress),children:[(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:o.description.moniker})}),(0,r.jsx)("div",{children:o.operatorAddress})]}),m&&(0,r.jsxs)("div",{children:["Voting power: ",f]}),(0,r.jsx)("div",{children:(0,r.jsx)(s.z,{disabled:t,onClick:n,structure:"naked",children:"Stake here"})}),a&&(0,r.jsx)("div",{children:(0,r.jsx)(l.default,{href:a,target:"_blank",children:a})})]})}),b=(0,d.memo)(function(){let{account:e,staking:t}=(0,c.n)(),[n,m]=(0,d.useState)(!1),{delegations:f,isInfoLoading:p,tokens:b,unbondings:k,validators:w}=t.state,{client:A}=(0,i.Hj)(),[,y]=(0,i.dd)(),N=(0,d.useMemo)(()=>(null==w?void 0:w.items.reduce((e,t)=>(e[t.operatorAddress]=t,e),{}))||{},[w]),C=(0,u.U2)(t.state),E=(0,u.jv)(t.state),S=(0,v.H)([b,E,C].filter(e=>!!e));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{children:"Account"}),(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e.bech32Address})}),(0,r.jsx)("div",{children:(0,r.jsx)(s.z,{onClick:()=>{y(!0)},children:"Open Settings"})}),b&&(0,r.jsxs)("div",{children:["Tokens: ",(0,r.jsx)("b",{children:(0,x.Em)(b)})]}),C&&(0,r.jsxs)("div",{children:["Total delegation: ",(0,r.jsx)("b",{children:(0,x.Em)(C)})]}),E&&(0,r.jsxs)("div",{children:["Total unbonding: ",(0,r.jsx)("b",{children:(0,x.Em)(E)})]}),S&&(0,r.jsxs)("div",{children:["Total owned: ",(0,r.jsx)("b",{children:(0,x.Em)(S)})]})]}),p&&(0,r.jsx)("div",{children:"Loading ..."}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(l.default,{href:(0,h.G)(e.bech32Address),target:"_blank",children:(0,r.jsx)(s.z,{onClick:()=>{},children:"VIEW ACCOUNT"})}),(0,r.jsx)(j,{})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-5",children:[!!(null==w?void 0:w.items.length)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Validators:"}),(0,r.jsx)("div",{className:"max-h-[500px] max-w-max overflow-auto",children:w.items.map(i=>(0,r.jsx)(g,{disabled:n,onStake:()=>{if(!A)return;m(!0);let n={delegator:e.bech32Address,validator:i.operatorAddress};(0,a._5)(n,A,t).then(()=>{(0,o.Am)("Staking successful",{type:"success"})}).catch(()=>{(0,o.Am)("Staking error",{type:"error"})}).finally(()=>{m(!1)})},staking:t,validator:i},i.operatorAddress))})]}),(0,r.jsxs)("div",{className:"max-h-[500px] overflow-auto",children:[!!(null==f?void 0:f.items.length)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Delegations:"}),f.items.map(i=>{let l=N[i.validatorAddress],d=null==l?void 0:l.description.moniker;return(0,r.jsxs)("div",{style:{border:"1px solid #fff",marginBottom:20},children:[(0,r.jsxs)("div",{children:["Delegated: ",(0,x.Em)(i.balance)]}),i.rewards&&(0,r.jsxs)("div",{children:["Rewards: ",(0,x.Em)(i.rewards)]}),(0,r.jsxs)("div",{children:["Validator: ",d||i.validatorAddress]}),(0,r.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,r.jsx)(s.z,{disabled:n,onClick:()=>{if(!A||!l)return;m(!0);let n={delegator:e.bech32Address,validator:l.operatorAddress};(0,a.xu)(n,A,t).then(()=>{(0,o.Am)("Unstake successful",{type:"success"})}).catch(()=>{(0,o.Am)("Unstake error",{type:"error"})}).finally(()=>{m(!1)})},children:"Undelegate"}),i.rewards&&(0,r.jsx)(s.z,{disabled:n||"0"===i.rewards.amount,onClick:()=>{if(!A)return;m(!0);let n={delegator:e.bech32Address,validator:i.validatorAddress};(0,a.sT)(n,A,t).then(()=>{(0,o.Am)("Claim success",{type:"success"})}).catch(()=>{(0,o.Am)("Claim error",{type:"error"})}).finally(()=>{m(!1)})},children:"Claim rewards"})]})]},i.validatorAddress)})]}),!!(null==k?void 0:k.items.length)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Unbondings:"}),(0,r.jsx)("div",{children:null==k?void 0:k.items.map(e=>{let t=N[e.validator];return(0,r.jsxs)("div",{style:{border:"1px solid #fff"},children:[(0,r.jsxs)("div",{children:["Unbonding tokens: ",(0,x.Em)(e.balance)]}),(0,r.jsxs)("div",{children:["Completed by:"," ",new Date(e.completionTime).toString()]}),(0,r.jsxs)("div",{children:["Validator:"," ",(null==t?void 0:t.description.moniker)||e.validator]})]},"".concat(e.completionTime,"-").concat(e.completionTimeNanos))})})]})]})]})]})})},39730:function(e,t,n){"use strict";n.d(t,{Sg:function(){return d},U2:function(){return s},jv:function(){return l}});var r=n(22840),i=n(66803);let s=e=>{let{delegations:t}=e;if(!(null==t?void 0:t.items.length))return null;let n=t.items.map(e=>e.balance);return(0,i.H)(n)},l=e=>{let{unbondings:t}=e;if(!(null==t?void 0:t.items.length))return null;let n=t.items.map(e=>e.balance);return(0,i.H)(n)},d=(e,t)=>{let{pool:n}=t;return e&&"string"==typeof(null==n?void 0:n.bondedTokens)?new r.Z(e).div(new r.Z(n.bondedTokens)).toNumber():null}},40168:function(e,t,n){"use strict";n.d(t,{E:function(){return s},G:function(){return i}});var r=n(9016);let i=e=>"https://explorer.burnt.com/".concat(r.Bv,"/account/").concat(e),s=e=>"https://explorer.burnt.com/".concat(r.Bv,"/staking/").concat(e)},67497:function(e,t,n){"use strict";n.d(t,{Em:function(){return s},gg:function(){return l},i:function(){return d}});var r=n(22840),i=n(66803);let s=e=>{let t=(0,i.b)(e),n=new r.Z(t.amount);return"".concat(n.toFormat()," ").concat(t.denom)},l=e=>{if("number"!=typeof e||Number.isNaN(e))return null;let t=e<1e-4?"<0.1":(100*e).toFixed(1);return"".concat(t,"%")},d=e=>{let t=new r.Z(e).div(new r.Z(10).pow(18)).toNumber();return"".concat((100*t).toFixed(0),"%")}},61947:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});let r={},i={getIdentityLogo:e=>{if(r[e])return r[e];let t=fetch("https://keybase.io/_/api/1.0/user/lookup.json?key_suffix=".concat(e)).then(e=>e.json()).then(e=>{var t,n,r,i;return(null==e?void 0:null===(i=e.them)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:null===(n=r.pictures)||void 0===n?void 0:null===(t=n.primary)||void 0===t?void 0:t.url)||null}).catch(()=>null);return r[e]=t,t}}}},function(e){e.O(0,[350,218,147,228,933,45,792,123,658,971,69,744],function(){return e(e.s=67617)}),_N_E=e.O()}]);