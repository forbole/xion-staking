(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{46601:function(){},89214:function(){},42480:function(){},85568:function(){},69386:function(){},31616:function(){},20131:function(){},16026:function(){},33370:function(){},96496:function(e,t,n){Promise.resolve().then(n.bind(n,3612))},3612:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(3827),a=n(52674),s=n(80469),i=n(62331),d=n(8792),o=n(64090),l=n(65617),c=n(22840);let u=e=>{var t,n;return(null===(t=e.denom)||void 0===t?void 0:t.toUpperCase())==="UXION"?{amount:new c.Z(e.amount).div(new c.Z(10).pow(6)).toString(),denom:"XION"}:(null===(n=e.denom)||void 0===n?void 0:n.toUpperCase())==="XION"?{amount:e.amount,denom:"XION"}:e},m=e=>{let t=u(e),n=new c.Z(t.amount);return"".concat(n.toFormat()," ").concat(t.denom)};var h=n(12255),f=n(18722),x=()=>{let[e,t]=(0,o.useState)(null);return((0,o.useEffect)(()=>{(async()=>{var e;let n=localStorage.getItem("xion-authz-temp-account");if(!n)return;let r=await f.DirectSecp256k1HdWallet.deserialize(n,"abstraxion"),a=await r.getAccounts(),s=null==a?void 0:null===(e=a[0])||void 0===e?void 0:e.address;s&&t(s)})()},[]),e)?(0,r.jsx)(d.default,{href:"https://explorer.burnt.com/".concat(h.Bv,"/account/").concat(e),target:"_blank",children:(0,r.jsx)(i.z,{onClick:()=>{},children:"DEBUG ACCOUNT"})}):null};let v=e=>{let{disabled:t,onStake:n,validator:a}=e,{website:s}=a.description;return(0,r.jsxs)("div",{style:{border:"solid 1ps white",marginBottom:10},children:[(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:a.description.moniker})}),(0,r.jsx)("div",{children:a.operatorAddress}),(0,r.jsx)("div",{children:(0,r.jsx)(i.z,{disabled:t,onClick:n,structure:"naked",children:"Stake here"})}),s&&(0,r.jsx)("div",{children:(0,r.jsx)(d.default,{href:s,target:"_blank",children:s})})]})};var g=(0,o.memo)(function(){let{account:e,staking:t}=(0,s.n)(),[n,c]=(0,o.useState)(!1),{delegations:u,tokens:f,validators:g}=t.state,{client:p}=(0,a.Hj)(),j=(null==g?void 0:g.items.reduce((e,t)=>(e[t.operatorAddress]=t,e),{}))||{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{children:"Account"}),(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e.bech32Address})}),f&&(0,r.jsxs)("div",{children:["Tokens: ",(0,r.jsx)("b",{children:m(f)})]})]}),u&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Delegations:"}),u.items.map(n=>{let a=j[n.validatorAddress],s=null==a?void 0:a.description.moniker;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:m(n.amount)}),(0,r.jsx)("div",{children:s||n.validatorAddress}),(0,r.jsx)(i.z,{onClick:()=>{if(c(!0),!p)return;c(!0);let n={delegator:e.bech32Address,validator:a.operatorAddress};(0,l.yQ)(n,p,t).then(()=>{c(!1)})},children:"Undelegate"})]},n.validatorAddress)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(d.default,{href:"https://explorer.burnt.com/".concat(h.Bv,"/account/").concat(e.bech32Address),target:"_blank",children:(0,r.jsx)(i.z,{onClick:()=>{},children:"VIEW ACCOUNT"})}),(0,r.jsx)(x,{})]}),g&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Validators:"}),(0,r.jsx)("div",{className:"max-h-[200px] max-w-max overflow-auto",children:g.items.map(a=>(0,r.jsx)(v,{disabled:n,onStake:()=>{if(!p)return;c(!0);let n={delegator:e.bech32Address,validator:a.operatorAddress};(0,l.yt)(n,p,t).then(()=>{c(!1)})},validator:a},a.operatorAddress))})]})]})});function p(){let[,e]=(0,a.dd)(),t=(0,o.useCallback)(()=>{e(!0)},[e]);return(0,r.jsx)("div",{className:"w-max",children:(0,r.jsx)(i.z,{fullWidth:!0,onClick:t,structure:"base",children:"CONNECT"})})}function j(){let{isLoggedIn:e}=(0,s.n)(),[t,n]=(0,a.dd)();return(0,r.jsxs)("main",{className:"m-auto flex min-h-screen max-w-xs flex-col items-center justify-center gap-4 p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold tracking-tighter text-black dark:text-white",children:"XION Staking"}),e?(0,r.jsx)(g,{}):(0,r.jsx)(p,{}),t&&(0,r.jsx)(a.my,{onClose:()=>{n(!1)}})]})}},65617:function(e,t,n){"use strict";n.d(t,{co:function(){return f},yt:function(){return x},yQ:function(){return v}});var r=n(58015),a=n(43890),s=n(62884),i=n(12255);let d=async()=>{let e=await a.Tendermint34Client.connect(i.Od);return r.QueryClient.withExtensions(e,r.setupStakingExtension)},o=async()=>{let e=await d();return await e.staking.validators("BOND_STATUS_BONDED")},l=async e=>{let t=await r.StargateClient.connect(i.Od);return await t.getBalance(e,"uxion")},c=async e=>{let t=await d();return await t.staking.delegatorDelegations(e)},u=async(e,t,n)=>{let r=s.MsgDelegate.fromPartial({amount:n,delegatorAddress:e.delegator,validatorAddress:e.validator}),a={amount:[{amount:"1000",denom:"uxion"}],gas:"200000",granter:e.delegator};return await t.signAndBroadcast(e.delegator,[{typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:r}],a)},m=async(e,t,n)=>{let r=s.MsgUndelegate.fromPartial({amount:n,delegatorAddress:e.delegator,validatorAddress:e.validator}),a={amount:[{amount:"1000",denom:"uxion"}],gas:"200000",granter:e.delegator};return await t.signAndBroadcast(e.delegator,[{typeUrl:"/cosmos.staking.v1beta1.MsgUndelegate",value:r}],a)};var h=n(62986);let f=async(e,t)=>{try{let[n,r,a]=await Promise.all([l(e),o(),c(e)]);t.dispatch((0,h.d0)(n)),t.dispatch((0,h.T2)({currentPage:0,items:r.validators})),t.dispatch((0,h.Qx)({currentPage:0,items:a.delegationResponses.map(e=>({amount:e.balance,validatorAddress:e.delegation.validatorAddress}))}))}catch(e){console.error("error fetching staking data:",e)}},x=async(e,t,n)=>{await u(e,t,{amount:"1000",denom:"uxion"}),await f(e.delegator,n)},v=async(e,t,n)=>{await m(e,t,{amount:"1000",denom:"uxion"}),await f(e.delegator,n)}},80469:function(e,t,n){"use strict";n.d(t,{f:function(){return o},n:function(){return d}});var r=n(52674),a=n(64090),s=n(76958),i=n(65617);let d=()=>{let e=(0,a.useRef)({}),t=(0,a.useContext)(s.Y);e.current.state=t.state,e.current.dispatch=t.dispatch;let{data:n}=(0,r.hT)(),i=null==n?void 0:n.bech32Address;return{account:n,address:i,isLoggedIn:!!(null==n?void 0:n.bech32Address),staking:e.current}},o=()=>{let{address:e,isLoggedIn:t,staking:n}=d();(0,a.useEffect)(()=>{t&&e&&(0,i.co)(e,n)},[t,e,n])}},76958:function(e,t,n){"use strict";n.d(t,{W:function(){return a},Y:function(){return s}});var r=n(64090);let a={delegations:null,tokens:null,validators:null},s=(0,r.createContext)({dispatch:()=>null,state:a})},62986:function(e,t,n){"use strict";n.d(t,{I6:function(){return o},Qx:function(){return s},T2:function(){return a},d0:function(){return r}});let r=e=>({content:e,type:"SET_TOKENS"}),a=e=>({content:e,type:"ADD_VALIDATORS"}),s=e=>({content:e,type:"ADD_DELEGATIONS"}),i=e=>{let t=new Set;return e.filter(e=>!t.has(e.operatorAddress)&&(t.add(e.operatorAddress),!0))},d=e=>{let t=new Set;return e.filter(e=>!t.has(e.validatorAddress)&&(t.add(e.validatorAddress),!0))},o=(e,t)=>{switch(t.type){case"SET_TOKENS":return{...e,tokens:t.content};case"ADD_VALIDATORS":{let n=e.validators||{currentPage:0,items:[]};return n.currentPage+=1,n.items=i(n.items.concat(t.content.items)),{...e,validators:n}}case"ADD_DELEGATIONS":{let n=e.delegations||{currentPage:0,items:[]};return n.currentPage+=1,n.items=d(t.content.items.concat(n.items)),{...e,delegations:n}}default:return e}}},12255:function(e,t,n){"use strict";n.d(t,{Bv:function(){return r},Od:function(){return s},T$:function(){return a}});let{chainId:r}=n(3436).testnetChainInfo,a=void 0,s="https://rpc.xion-testnet-1.burnt.com:443"}},function(e){e.O(0,[350,218,147,228,933,945,969,971,69,744],function(){return e(e.s=96496)}),_N_E=e.O()}]);