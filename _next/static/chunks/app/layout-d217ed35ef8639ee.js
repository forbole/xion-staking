(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{46601:function(){},89214:function(){},42480:function(){},85568:function(){},69386:function(){},31616:function(){},20131:function(){},16026:function(){},33370:function(){},18127:function(t,e,n){Promise.resolve().then(n.bind(n,41994))},41994:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v}});var a=n(3827),o=n(99646),i=n.n(o),r=n(52674);n(22754),n(25805);var s=n(64090),l=n(80469),d=n(62986),u=n(544);let c=t=>{let{children:e}=t;return(0,l.f)(),(0,a.jsx)(a.Fragment,{children:e})},g=t=>{let{children:e}=t,[n,o]=(0,s.useReducer)(d.I6,u.W);return(0,s.useEffect)(()=>{window.stakingContext={state:n}},[n]),(0,a.jsx)(u.Y.Provider,{value:{dispatch:o,state:n},children:(0,a.jsx)(c,{children:e})})};var m=n(9016);n(63385);let f={contracts:[],dashboardUrl:m.T$,rpcUrl:m.Od,stake:!0};function v(t){let{children:e}=t;return(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{className:i().className,children:(0,a.jsx)(r.B7,{config:f,children:(0,a.jsx)(g,{children:e})})})})}},94108:function(t,e,n){"use strict";n.d(e,{sT:function(){return E},wX:function(){return N},d7:function(){return I},_5:function(){return O},xu:function(){return T}});var a=n(58015),o=n(22840),i=n(53856),r=n(62884),s=n(18722),l=n(43890),d=n(9016);let u=async()=>{let t=await l.Tendermint34Client.connect(d.Od);return a.QueryClient.withExtensions(t,a.setupStakingExtension,a.setupDistributionExtension,a.setupIbcExtension)},c=async()=>{let t=localStorage.getItem("xion-authz-temp-account");if(!t)return;let e=await s.DirectSecp256k1HdWallet.deserialize(t,"abstraxion"),n=await e.getAccounts().then(t=>{var e;return null===(e=t[0])||void 0===e?void 0:e.address});return{client:await a.SigningStargateClient.connectWithSigner(d.Od,e),granteeAddress:n}};var g=n(66803),m=n(97481);let f=async(t,e)=>{let{client:n,granteeAddress:a}=await c()||{};if(!n||!a)return null;let o=[{typeUrl:"/cosmos.authz.v1beta1.MsgExec",value:m.MsgExec.fromPartial({grantee:a,msgs:t.map(t=>n.registry.encodeAsAny(t))})}];return await n.simulate(a,o,e).then(t=>(1.2*t).toString()).catch(t=>(console.log("debug: core/base.ts: Estimate error",t),null))},v=async t=>{let{address:e,amount:n=[{amount:"1000",denom:"uxion"}],gasLimit:a="400000",memo:o="",msgs:i}=t;return{amount:n,gas:await f(i,o)||a,granter:e}},p=async()=>{let t=await u();return await t.staking.validators("BOND_STATUS_BONDED")},w=async t=>{let e=await a.StargateClient.connect(d.Od);return await e.getBalance(t,"uxion")},y=async t=>{let e=await u();return await e.staking.delegatorDelegations(t)},h=async t=>{let e=await u();return await e.staking.delegatorUnbondingDelegations(t)},x=async(t,e)=>{let n=await u(),a=await n.distribution.delegationRewards(t,e);return(await Promise.all(a.rewards.map(async t=>{if(0==t.denom.indexOf("ibc/")){var e;let a=await n.ibc.transfer.denomTrace(t.denom.substring(4));t.denom=(null===(e=a.denomTrace)||void 0===e?void 0:e.baseDenom)||t.denom}return t}))).filter(t=>{var e;return(null===(e=t.denom)||void 0===e?void 0:e.toUpperCase())==="UXION"}).map(t=>({amount:new o.Z(t.amount).div(new o.Z(10).pow(18)).toString(),denom:t.denom})).map(t=>(0,g.bI)(t))},b=async(t,e,n)=>{let a={typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:r.MsgDelegate.fromPartial({amount:n,delegatorAddress:t.delegator,validatorAddress:t.validator})},o=await v({address:t.delegator,msgs:[a]});return await e.signAndBroadcast(t.delegator,[a],o)},A=async(t,e,n)=>{let a={typeUrl:"/cosmos.staking.v1beta1.MsgUndelegate",value:r.MsgUndelegate.fromPartial({amount:n,delegatorAddress:t.delegator,validatorAddress:t.validator})},o=await v({address:t.delegator,msgs:[a]});return await e.signAndBroadcast(t.delegator,[a],o)},D=async(t,e)=>{let n={typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:i.MsgWithdrawDelegatorReward.fromPartial({delegatorAddress:t.delegator,validatorAddress:t.validator})},a=await v({address:t.delegator,msgs:[n]});return await e.signAndBroadcast(t.delegator,[n],a)},S=async(t,e)=>{let n={typeUrl:"/cosmos.staking.v1beta1.MsgBeginRedelegate",value:r.MsgBeginRedelegate.fromPartial({delegatorAddress:t})},a=await v({address:t,msgs:[n]});return await e.signAndBroadcast(t,[n],a)};var _=n(62986);let N=async(t,e)=>{try{var n,a,o,i,r,s;let[l,d,u,c]=await Promise.all([w(t),p(),y(t).then(async e=>({items:await Promise.all(e.delegationResponses.map(async e=>({balance:e.balance,rewards:await x(t,e.delegation.validatorAddress).then(t=>(0,g.HJ)(t)),validatorAddress:e.delegation.validatorAddress}))),pagination:e.pagination})),h(t).then(t=>({items:t.unbondingResponses.reduce((t,e)=>(t.push(...e.entries.map(t=>({balance:{amount:t.balance,denom:"uxion"},completionTime:Number(t.completionTime.seconds),completionTimeNanos:t.completionTime.nanos,id:t.unbondingId.toString(),validator:e.validatorAddress}))),t),[]),pagination:t.pagination})).catch(()=>({items:[],pagination:null})).then(t=>({items:t.items,pagination:t.pagination}))]);e.dispatch((0,_.d0)(l)),e.dispatch((0,_.T2)({items:d.validators,nextKey:(null===(n=d.pagination)||void 0===n?void 0:n.nextKey)||null,total:(null===(a=d.pagination)||void 0===a?void 0:a.total)||null},!0)),e.dispatch((0,_.Qx)({items:u.items,nextKey:(null===(o=u.pagination)||void 0===o?void 0:o.nextKey)||null,total:(null===(i=u.pagination)||void 0===i?void 0:i.total)||null},!0)),e.dispatch((0,_.Kg)({items:c.items,nextKey:(null===(r=c.pagination)||void 0===r?void 0:r.nextKey)||null,total:(null===(s=c.pagination)||void 0===s?void 0:s.total)||null},!0))}catch(t){console.error("error fetching staking data:",t)}},O=async(t,e,n)=>{await b(t,e,{amount:"1000",denom:"uxion"}),await N(t.delegator,n)},T=async(t,e,n)=>{console.log("debug: actions.ts: result",await A(t,e,{amount:"1000",denom:"uxion"})),await N(t.delegator,n)},E=async(t,e,n)=>{console.log("debug: actions.ts: result",await D(t,e)),await N(t.delegator,n)},I=async(t,e,n)=>{console.log("debug: actions.ts: result",await S(t,e)),await N(t,n)}},80469:function(t,e,n){"use strict";n.d(e,{f:function(){return l},n:function(){return s}});var a=n(52674),o=n(64090),i=n(94108),r=n(544);let s=()=>{let t=(0,o.useRef)({}),e=(0,o.useContext)(r.Y);t.current.state=e.state,t.current.dispatch=e.dispatch;let{data:n,isConnected:i}=(0,a.hT)(),s=null==n?void 0:n.bech32Address;return{account:n,address:s,isConnected:i,staking:t.current}},l=()=>{let{address:t,isConnected:e,staking:n}=s();(0,o.useEffect)(()=>{e&&t&&(0,i.wX)(t,n)},[e,t,n])}},62986:function(t,e,n){"use strict";n.d(e,{I6:function(){return u},Kg:function(){return r},Qx:function(){return i},T2:function(){return o},d0:function(){return a}});let a=t=>({content:t,type:"SET_TOKENS"}),o=(t,e)=>({content:t,reset:e,type:"ADD_VALIDATORS"}),i=(t,e)=>({content:t,reset:e,type:"ADD_DELEGATIONS"}),r=(t,e)=>({content:t,reset:e,type:"ADD_UNBONDINGS"}),s=t=>{let e=new Set;return t.filter(t=>!e.has(t.operatorAddress)&&(e.add(t.operatorAddress),!0))},l=t=>{let e=new Set;return t.filter(t=>!e.has(t.validatorAddress)&&(e.add(t.validatorAddress),!0))},d=t=>{let e=new Set;return t.filter(t=>{let n=t.id;return!e.has(n)&&(e.add(n),!0)})},u=(t,e)=>{switch(e.type){case"SET_TOKENS":return{...t,tokens:e.content};case"ADD_VALIDATORS":{let n=!e.reset&&t.validators||{items:[],nextKey:null,total:null};return n.total=e.content.total,n.nextKey=e.content.nextKey,n.items=s(n.items.concat(e.content.items)),{...t,validators:n}}case"ADD_DELEGATIONS":{let n=!e.reset&&t.delegations||{items:[],nextKey:null,total:null};return n.total=e.content.total,n.nextKey=e.content.nextKey,n.items=l(e.content.items.concat(n.items)),{...t,delegations:n}}case"ADD_UNBONDINGS":{let n=!e.reset&&t.unbondings||{items:[],nextKey:null,total:null};return n.total=e.content.total,n.nextKey=e.content.nextKey,n.items=d(e.content.items.concat(n.items)),{...t,unbondings:n}}default:return t}}},544:function(t,e,n){"use strict";n.d(e,{W:function(){return o},Y:function(){return i}});var a=n(64090);let o={delegations:null,tokens:null,unbondings:null,validators:null},i=(0,a.createContext)({dispatch:()=>null,state:o})},66803:function(t,e,n){"use strict";n.d(e,{Em:function(){return i},HJ:function(){return s},bI:function(){return o}});var a=n(22840);let o=t=>{var e,n,o;return(null===(e=t.denom)||void 0===e?void 0:e.toUpperCase())==="UXION"?{amount:new a.Z(t.amount).div(new a.Z(10).pow(6)).toString(),denom:"XION"}:(null===(n=t.denom)||void 0===n?void 0:n.toUpperCase())==="XION"?{amount:t.amount,denom:"XION"}:{...t,denom:null===(o=t.denom)||void 0===o?void 0:o.toUpperCase()}},i=t=>{let e=o(t),n=new a.Z(e.amount);return"".concat(n.toFormat()," ").concat(e.denom)},r=()=>({amount:"0",denom:"xion"}),s=t=>t.reduce((t,e)=>({amount:(parseFloat(t.amount)+parseFloat(o(e).amount)).toString(),denom:e.denom}),r())},9016:function(t,e,n){"use strict";n.d(e,{Bv:function(){return a},Od:function(){return i},T$:function(){return o}});let{chainId:a}=n(3436).testnetChainInfo,o=void 0,i="https://rpc.xion-testnet.forbole.com"},22754:function(){},25805:function(){},63385:function(){},99646:function(t){t.exports={style:{fontFamily:"'__Inter_215590', '__Inter_Fallback_215590'",fontStyle:"normal"},className:"__className_215590"}}},function(t){t.O(0,[350,218,147,228,933,852,45,971,69,744],function(){return t(t.s=18127)}),_N_E=t.O()}]);