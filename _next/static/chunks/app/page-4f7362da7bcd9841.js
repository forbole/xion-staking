(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{96496:function(e,r,s){Promise.resolve().then(s.bind(s,68454))},68454:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return p}});var d=s(3827),i=s(52674),l=s(80469),n=s(59115),t=s(8792),a=s(64090),c=s(86123),o=s(94108),h=s(66803),u=s(9016),x=s(18722),m=()=>{let[e,r]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{var e;let s=localStorage.getItem("xion-authz-temp-account");if(!s)return;let d=await x.DirectSecp256k1HdWallet.deserialize(s,"abstraxion"),i=await d.getAccounts(),l=null==i?void 0:null===(e=i[0])||void 0===e?void 0:e.address;l&&r(l)})()},[]),e)?(0,d.jsx)(t.default,{href:"https://explorer.burnt.com/".concat(u.Bv,"/account/").concat(e),target:"_blank",children:(0,d.jsx)(n.z,{onClick:()=>{},children:"DEBUG ACCOUNT"})}):null};let v=e=>{let{disabled:r,onStake:s,validator:i}=e,{website:l}=i.description;return(0,d.jsxs)("div",{style:{border:"solid 1ps white",marginBottom:10},children:[(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:i.description.moniker})}),(0,d.jsx)("div",{children:i.operatorAddress}),(0,d.jsx)("div",{children:(0,d.jsx)(n.z,{disabled:r,onClick:s,structure:"naked",children:"Stake here"})}),l&&(0,d.jsx)("div",{children:(0,d.jsx)(t.default,{href:l,target:"_blank",children:l})})]})};var j=(0,a.memo)(function(){let{account:e,staking:r}=(0,l.n)(),[s,x]=(0,a.useState)(!1),{delegations:j,isInfoLoading:f,tokens:p,unbondings:b,validators:g}=r.state,{client:k}=(0,i.Hj)(),[,A]=(0,i.dd)(),C=(0,a.useMemo)(()=>(null==g?void 0:g.items.reduce((e,r)=>(e[r.operatorAddress]=r,e),{}))||{},[g]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("div",{children:"Account"}),(0,d.jsx)("div",{children:(0,d.jsx)("b",{children:e.bech32Address})}),(0,d.jsx)("div",{children:(0,d.jsx)(n.z,{onClick:()=>{A(!0)},children:"Open Settings"})}),p&&(0,d.jsxs)("div",{children:["Tokens: ",(0,d.jsx)("b",{children:(0,h.Em)(p)})]})]}),f&&(0,d.jsx)("div",{children:"Loading ..."}),!!(null==j?void 0:j.items.length)&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:"Delegations:"}),j.items.map(i=>{let l=C[i.validatorAddress],t=null==l?void 0:l.description.moniker;return(0,d.jsxs)("div",{style:{border:"1px solid #fff",marginBottom:20},children:[(0,d.jsxs)("div",{children:["Delegated: ",(0,h.Em)(i.balance)]}),i.rewards&&(0,d.jsxs)("div",{children:["Rewards: ",(0,h.Em)(i.rewards)]}),(0,d.jsxs)("div",{children:["Validator: ",t||i.validatorAddress]}),(0,d.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,d.jsx)(n.z,{disabled:s,onClick:()=>{if(!k||!l)return;x(!0);let s={delegator:e.bech32Address,validator:l.operatorAddress};(0,o.xu)(s,k,r).then(()=>{(0,c.Am)("Unstake successful",{type:"success"})}).catch(()=>{(0,c.Am)("Unstake error",{type:"error"})}).finally(()=>{x(!1)})},children:"Undelegate"}),i.rewards&&(0,d.jsx)(n.z,{disabled:s||"0"===i.rewards.amount,onClick:()=>{if(!k)return;x(!0);let s={delegator:e.bech32Address,validator:i.validatorAddress};(0,o.sT)(s,k,r).then(()=>{(0,c.Am)("Claim success",{type:"success"})}).catch(()=>{(0,c.Am)("Claim error",{type:"error"})}).finally(()=>{x(!1)})},children:"Claim rewards"}),(0,d.jsx)(n.z,{disabled:s,onClick:()=>{k&&(x(!0),(0,o.d7)(e.bech32Address,k,r).finally(()=>{x(!1)}))},children:"Redelelegate"})]})]},i.validatorAddress)})]}),!!(null==b?void 0:b.items.length)&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:"Unbondings:"}),(0,d.jsx)("div",{children:null==b?void 0:b.items.map(e=>{let r=C[e.validator];return(0,d.jsxs)("div",{style:{border:"1px solid #fff"},children:[(0,d.jsxs)("div",{children:["Unbonding tokens: ",(0,h.Em)(e.balance)]}),(0,d.jsxs)("div",{children:["Completed by:"," ",new Date(e.completionTime).toString()]}),(0,d.jsxs)("div",{children:["Validator:"," ",(null==r?void 0:r.description.moniker)||e.validator]})]},"".concat(e.completionTime,"-").concat(e.completionTimeNanos))})})]}),(0,d.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,d.jsx)(t.default,{href:"https://explorer.burnt.com/".concat(u.Bv,"/account/").concat(e.bech32Address),target:"_blank",children:(0,d.jsx)(n.z,{onClick:()=>{},children:"VIEW ACCOUNT"})}),(0,d.jsx)(m,{})]}),g&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:"Validators:"}),(0,d.jsx)("div",{className:"max-h-[200px] max-w-max overflow-auto",children:g.items.map(i=>(0,d.jsx)(v,{disabled:s,onStake:()=>{if(!k)return;x(!0);let s={delegator:e.bech32Address,validator:i.operatorAddress};(0,o._5)(s,k,r).then(()=>{(0,c.Am)("Staking successful",{type:"success"})}).catch(()=>{(0,c.Am)("Staking error",{type:"error"})}).finally(()=>{x(!1)})},validator:i},i.operatorAddress))})]})]})});function f(){let[,e]=(0,i.dd)(),r=(0,a.useCallback)(()=>{e(!0)},[e]);return(0,d.jsx)("div",{className:"w-max",children:(0,d.jsx)(n.z,{fullWidth:!0,onClick:r,structure:"base",children:"CONNECT"})})}function p(){let{isConnected:e}=(0,l.n)(),[r,s]=(0,i.dd)();return(0,d.jsxs)(d.Fragment,{children:[e?(0,d.jsx)(j,{}):(0,d.jsx)(f,{}),r&&(0,d.jsx)(i.my,{onClose:()=>{s(!1)}})]})}}},function(e){e.O(0,[350,218,147,228,933,478,792,658,971,69,744],function(){return e(e.s=96496)}),_N_E=e.O()}]);