(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67617:function(e,t,n){Promise.resolve().then(n.bind(n,66319))},66319:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(3827),i=n(52674),l=n(59115),s=n(8792),d=n(64090),o=n(86123),c=n(25362),a=n(80469),u=n(39730),h=n(40168),v=n(21390),x=n(66803),m=n(67497),f=n(18722),j=n(9016),p=()=>{let[e,t]=(0,d.useState)(null);return((0,d.useEffect)(()=>{(async()=>{var e;let n=localStorage.getItem("xion-authz-temp-account");if(!n)return;let r=await f.DirectSecp256k1HdWallet.deserialize(n,"abstraxion"),i=await r.getAccounts(),l=null==i?void 0:null===(e=i[0])||void 0===e?void 0:e.address;l&&t(l)})()},[]),e)?(0,r.jsx)(s.default,{href:"https://explorer.burnt.com/".concat(j.Bv,"/account/").concat(e),target:"_blank",children:(0,r.jsx)(l.z,{onClick:()=>{},children:"DEBUG ACCOUNT"})}):null},g=n(61947),b=(0,d.memo)(e=>{let{disabled:t,onStake:n,staking:i,validator:o}=e,{website:c}=o.description,[a,h]=(0,d.useState)(null),{identity:v}=o.description;(0,d.useEffect)(()=>{(async()=>{v&&h(await g.x.getIdentityLogo(v))})()},[v]);let x=(0,u.Sg)(null==o?void 0:o.tokens,i.state),f=(0,m.gg)(x);return(0,r.jsxs)("div",{style:{border:"solid 1px white",marginBottom:10},children:[a&&(0,r.jsx)("div",{children:(0,r.jsx)("img",{alt:"Validator logo",src:a,style:{height:50,width:50}})}),(0,r.jsxs)(s.default,{href:"/validator?address=".concat(o.operatorAddress),children:[(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:o.description.moniker})}),(0,r.jsx)("div",{children:o.operatorAddress})]}),x&&(0,r.jsxs)("div",{children:["Voting power: ",f]}),(0,r.jsx)("div",{children:(0,r.jsx)(l.z,{disabled:t,onClick:n,structure:"naked",children:"Stake here"})}),c&&(0,r.jsx)("div",{children:(0,r.jsx)(s.default,{href:c,target:"_blank",children:c})})]})}),k=(0,d.memo)(function(){let{account:e,staking:t}=(0,a.n)(),[n,f]=(0,d.useState)(!1),{delegations:j,isInfoLoading:g,tokens:k,unbondings:w,validators:A}=t.state,{client:y}=(0,i.Hj)(),[,C]=(0,i.dd)(),[E,N]=(0,d.useState)(null);(0,d.useEffect)(()=>{let e=()=>{};return(0,v.wv)(e=>{N(e)},e=>{console.log("debug: main-page.tsx: err",e)},()=>{console.log("Subscription Completed"),N(null)}).then(t=>{e=t}),()=>{null==e||e()}},[]);let S=(0,d.useMemo)(()=>(null==A?void 0:A.items.reduce((e,t)=>(e[t.operatorAddress]=t,e),{}))||{},[A]),T=(0,u.U2)(t.state),_=(0,u.jv)(t.state),U=(0,x.H)([k,_,T].filter(e=>!!e));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{children:"Account"}),(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e.bech32Address})}),(0,r.jsx)("div",{children:(0,r.jsx)(l.z,{onClick:()=>{C(!0)},children:"Open Settings"})}),!!E&&(0,r.jsxs)("div",{children:["Block: #",E.header.height]}),k&&(0,r.jsxs)("div",{children:["Tokens: ",(0,r.jsx)("b",{children:(0,m.Em)(k)})]}),T&&(0,r.jsxs)("div",{children:["Total delegation: ",(0,r.jsx)("b",{children:(0,m.Em)(T)})]}),_&&(0,r.jsxs)("div",{children:["Total unbonding: ",(0,r.jsx)("b",{children:(0,m.Em)(_)})]}),U&&(0,r.jsxs)("div",{children:["Total owned: ",(0,r.jsx)("b",{children:(0,m.Em)(U)})]})]}),g&&(0,r.jsx)("div",{children:"Loading ..."}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(s.default,{href:(0,h.G)(e.bech32Address),target:"_blank",children:(0,r.jsx)(l.z,{onClick:()=>{},children:"VIEW ACCOUNT"})}),(0,r.jsx)(p,{})]}),(0,r.jsxs)("div",{className:"flex flex-row gap-5",children:[!!(null==A?void 0:A.items.length)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Validators:"}),(0,r.jsx)("div",{className:"max-h-[500px] max-w-max overflow-auto",children:A.items.map(i=>(0,r.jsx)(b,{disabled:n,onStake:()=>{if(!y)return;f(!0);let n={delegator:e.bech32Address,validator:i.operatorAddress};(0,c._5)(n,y,t).then(()=>{(0,o.Am)("Staking successful",{type:"success"})}).catch(()=>{(0,o.Am)("Staking error",{type:"error"})}).finally(()=>{f(!1)})},staking:t,validator:i},i.operatorAddress))})]}),(0,r.jsxs)("div",{className:"max-h-[500px] overflow-auto",children:[!!(null==j?void 0:j.items.length)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Delegations:"}),j.items.map(i=>{let s=S[i.validatorAddress],d=null==s?void 0:s.description.moniker;return(0,r.jsxs)("div",{style:{border:"1px solid #fff",marginBottom:20},children:[(0,r.jsxs)("div",{children:["Delegated: ",(0,m.Em)(i.balance)]}),i.rewards&&(0,r.jsxs)("div",{children:["Rewards: ",(0,m.Em)(i.rewards)]}),(0,r.jsxs)("div",{children:["Validator: ",d||i.validatorAddress]}),(0,r.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,r.jsx)(l.z,{disabled:n,onClick:()=>{if(!y||!s)return;f(!0);let n={delegator:e.bech32Address,validator:s.operatorAddress};(0,c.xu)(n,y,t).then(()=>{(0,o.Am)("Unstake successful",{type:"success"})}).catch(()=>{(0,o.Am)("Unstake error",{type:"error"})}).finally(()=>{f(!1)})},children:"Undelegate"}),i.rewards&&(0,r.jsx)(l.z,{disabled:n||"0"===i.rewards.amount,onClick:()=>{if(!y)return;f(!0);let n={delegator:e.bech32Address,validator:i.validatorAddress};(0,c.sT)(n,y,t).then(()=>{(0,o.Am)("Claim success",{type:"success"})}).catch(()=>{(0,o.Am)("Claim error",{type:"error"})}).finally(()=>{f(!1)})},children:"Claim rewards"})]})]},i.validatorAddress)})]}),!!(null==w?void 0:w.items.length)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Unbondings:"}),(0,r.jsx)("div",{children:null==w?void 0:w.items.map(e=>{let t=S[e.validator];return(0,r.jsxs)("div",{style:{border:"1px solid #fff"},children:[(0,r.jsxs)("div",{children:["Unbonding tokens: ",(0,m.Em)(e.balance)]}),(0,r.jsxs)("div",{children:["Completed by:"," ",new Date(e.completionTime).toString()]}),(0,r.jsxs)("div",{children:["Validator:"," ",(null==t?void 0:t.description.moniker)||e.validator]})]},"".concat(e.completionTime,"-").concat(e.completionTimeNanos))})})]})]})]})]})})},39730:function(e,t,n){"use strict";n.d(t,{Sg:function(){return d},U2:function(){return l},jv:function(){return s}});var r=n(22840),i=n(66803);let l=e=>{let{delegations:t}=e;if(!(null==t?void 0:t.items.length))return null;let n=t.items.map(e=>e.balance);return(0,i.H)(n)},s=e=>{let{unbondings:t}=e;if(!(null==t?void 0:t.items.length))return null;let n=t.items.map(e=>e.balance);return(0,i.H)(n)},d=(e,t)=>{let{pool:n}=t;return e&&"string"==typeof(null==n?void 0:n.bondedTokens)?new r.Z(e).div(new r.Z(n.bondedTokens)).toNumber():null}},40168:function(e,t,n){"use strict";n.d(t,{E:function(){return l},G:function(){return i}});var r=n(9016);let i=e=>"https://explorer.burnt.com/".concat(r.Bv,"/account/").concat(e),l=e=>"https://explorer.burnt.com/".concat(r.Bv,"/staking/").concat(e)},67497:function(e,t,n){"use strict";n.d(t,{Em:function(){return l},gg:function(){return s},i:function(){return d}});var r=n(22840),i=n(66803);let l=e=>{let t=(0,i.b)(e),n=new r.Z(t.amount);return"".concat(n.toFormat()," ").concat(t.denom)},s=e=>{if("number"!=typeof e||Number.isNaN(e))return null;let t=e<1e-4?"<0.1":(100*e).toFixed(1);return"".concat(t,"%")},d=e=>{let t=new r.Z(e).div(new r.Z(10).pow(18)).toNumber();return"".concat((100*t).toFixed(0),"%")}},61947:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});let r={},i={getIdentityLogo:e=>{if(r[e])return r[e];let t=fetch("https://keybase.io/_/api/1.0/user/lookup.json?key_suffix=".concat(e)).then(e=>e.json()).then(e=>{var t,n,r,i;return(null==e?void 0:null===(i=e.them)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:null===(n=r.pictures)||void 0===n?void 0:null===(t=n.primary)||void 0===t?void 0:t.url)||null}).catch(()=>null);return r[e]=t,t}}}},function(e){e.O(0,[350,218,147,228,933,45,792,123,658,971,69,744],function(){return e(e.s=67617)}),_N_E=e.O()}]);