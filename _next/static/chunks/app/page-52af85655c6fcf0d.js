(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{46601:function(){},89214:function(){},42480:function(){},85568:function(){},69386:function(){},31616:function(){},20131:function(){},16026:function(){},33370:function(){},96496:function(e,t,n){Promise.resolve().then(n.bind(n,3612))},3612:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(3827),a=n(52674),i=n(80469),s=n(62331),o=n(8792),c=n(64090),d=n(65617),l=n(22840);let u=e=>{var t,n;return(null===(t=e.denom)||void 0===t?void 0:t.toUpperCase())==="UXION"?{amount:new l.Z(e.amount).div(new l.Z(10).pow(6)).toString(),denom:"UXION"}:(null===(n=e.denom)||void 0===n?void 0:n.toUpperCase())==="XION"?{amount:e.amount,denom:"XION"}:e},h=e=>{let t=u(e),n=new l.Z(t.amount);return"".concat(n.toFormat()," ").concat(t.denom)};var m=n(12255),x=n(18722),f=()=>{let[e,t]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{var e;let n=localStorage.getItem("xion-authz-temp-account");if(!n)return;let r=await x.DirectSecp256k1HdWallet.deserialize(n,"abstraxion"),a=await r.getAccounts(),i=null==a?void 0:null===(e=a[0])||void 0===e?void 0:e.address;i&&t(i)})()},[]),e)?(0,r.jsx)(o.default,{href:"https://explorer.burnt.com/".concat(m.Bv,"/account/").concat(e),target:"_blank",children:(0,r.jsx)(s.z,{onClick:()=>{},children:"DEBUG ACCOUNT"})}):null};let v=e=>{let{disabled:t,onStake:n,validator:a}=e,{website:i}=a.description;return(0,r.jsxs)("div",{style:{border:"solid 1ps white",marginBottom:10},children:[(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:a.description.moniker})}),(0,r.jsx)("div",{children:a.operatorAddress}),(0,r.jsx)("div",{children:(0,r.jsx)(s.z,{disabled:t,onClick:n,structure:"naked",children:"Stake here"})}),i&&(0,r.jsx)("div",{children:(0,r.jsx)(o.default,{href:i,target:"_blank",children:i})})]})};var g=(0,c.memo)(function(){let{account:e,staking:t}=(0,i.n)(),[n,l]=(0,c.useState)(!1),{delegations:u,tokens:x,validators:g}=t.state,{client:p}=(0,a.Hj)(),j=(null==g?void 0:g.items.reduce((e,t)=>(e[t.operatorAddress]=t,e),{}))||{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{children:"Account"}),(0,r.jsx)("div",{children:(0,r.jsx)("b",{children:e.bech32Address})}),x&&(0,r.jsxs)("div",{children:["Tokens: ",(0,r.jsx)("b",{children:h(x)})]})]}),u&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Delegations:"}),u.items.map(e=>{let t=j[e.validatorAddress],n=null==t?void 0:t.description.moniker;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:h(e.amount)}),(0,r.jsx)("div",{children:n||e.validatorAddress}),(0,r.jsx)(s.z,{onClick:()=>{l(!0)},children:"Undelegate"})]},e.validatorAddress)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(o.default,{href:"https://explorer.burnt.com/".concat(m.Bv,"/account/").concat(e.bech32Address),target:"_blank",children:(0,r.jsx)(s.z,{onClick:()=>{},children:"VIEW ACCOUNT"})}),(0,r.jsx)(f,{})]}),g&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Validators:"}),(0,r.jsx)("div",{className:"max-h-[200px] max-w-max overflow-auto",children:g.items.map(a=>(0,r.jsx)(v,{disabled:n,onStake:()=>{if(!p)return;l(!0);let n={delegator:e.bech32Address,validator:a.operatorAddress};(0,d.y)(n,p,t).then(()=>{l(!1)})},validator:a},a.operatorAddress))})]})]})});function p(){let[,e]=(0,a.dd)(),t=(0,c.useCallback)(()=>{e(!0)},[e]);return(0,r.jsx)("div",{className:"w-max",children:(0,r.jsx)(s.z,{fullWidth:!0,onClick:t,structure:"base",children:"CONNECT"})})}function j(){let{isLoggedIn:e}=(0,i.n)(),[t,n]=(0,a.dd)();return(0,r.jsxs)("main",{className:"m-auto flex min-h-screen max-w-xs flex-col items-center justify-center gap-4 p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold tracking-tighter text-black dark:text-white",children:"XION Staking"}),e?(0,r.jsx)(g,{}):(0,r.jsx)(p,{}),t&&(0,r.jsx)(a.my,{onClose:()=>{n(!1)}})]})}},65617:function(e,t,n){"use strict";n.d(t,{c:function(){return m},y:function(){return x}});var r=n(58015),a=n(43890),i=n(62884),s=n(12255);let o=async()=>{let e=await a.Tendermint34Client.connect(s.Od);return r.QueryClient.withExtensions(e,r.setupStakingExtension)},c=async()=>{let e=await o();return await e.staking.validators("BOND_STATUS_BONDED")},d=async e=>{let t=await r.StargateClient.connect(s.Od);return await t.getBalance(e,"uxion")},l=async e=>{let t=await o();return await t.staking.delegatorDelegations(e)},u=async(e,t,n)=>{let r=i.MsgDelegate.fromPartial({amount:n,delegatorAddress:e.delegator,validatorAddress:e.validator}),a={amount:[{amount:"1000",denom:"uxion"}],gas:"200000",granter:e.delegator};return await t.signAndBroadcast(e.delegator,[{typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:r}],a)};var h=n(62986);let m=async(e,t)=>{try{let[n,r,a]=await Promise.all([d(e),c(),l(e)]);t.dispatch((0,h.d0)(n)),t.dispatch((0,h.T2)({currentPage:0,items:r.validators})),t.dispatch((0,h.Qx)({currentPage:0,items:a.delegationResponses.map(e=>({amount:e.balance,validatorAddress:e.delegation.validatorAddress}))}))}catch(e){console.error("error fetching staking data:",e)}},x=async(e,t,n)=>{await u(e,t,{amount:"1000",denom:"uxion"}),await m(e.delegator,n)}},80469:function(e,t,n){"use strict";n.d(t,{f:function(){return c},n:function(){return o}});var r=n(52674),a=n(64090),i=n(76958),s=n(65617);let o=()=>{let e=(0,a.useRef)({}),t=(0,a.useContext)(i.Y);e.current.state=t.state,e.current.dispatch=t.dispatch;let{data:n}=(0,r.hT)(),s=null==n?void 0:n.bech32Address;return{account:n,address:s,isLoggedIn:!!(null==n?void 0:n.bech32Address),staking:e.current}},c=()=>{let{address:e,isLoggedIn:t,staking:n}=o();(0,a.useEffect)(()=>{t&&e&&(0,s.c)(e,n)},[t,e,n])}},76958:function(e,t,n){"use strict";n.d(t,{W:function(){return a},Y:function(){return i}});var r=n(64090);let a={delegations:null,tokens:null,validators:null},i=(0,r.createContext)({dispatch:()=>null,state:a})},62986:function(e,t,n){"use strict";n.d(t,{I6:function(){return c},Qx:function(){return i},T2:function(){return a},d0:function(){return r}});let r=e=>({content:e,type:"SET_TOKENS"}),a=e=>({content:e,type:"ADD_VALIDATORS"}),i=e=>({content:e,type:"ADD_DELEGATIONS"}),s=e=>{let t=new Set;return e.filter(e=>!t.has(e.operatorAddress)&&(t.add(e.operatorAddress),!0))},o=e=>e,c=(e,t)=>{switch(t.type){case"SET_TOKENS":return{...e,tokens:t.content};case"ADD_VALIDATORS":{let n=e.validators||{currentPage:0,items:[]};return n.currentPage+=1,n.items=s(n.items.concat(t.content.items)),{...e,validators:n}}case"ADD_DELEGATIONS":{let n=e.delegations||{currentPage:0,items:[]};return n.currentPage+=1,n.items=o(n.items.concat(t.content.items)),{...e,delegations:n}}default:return e}}},12255:function(e,t,n){"use strict";n.d(t,{Bv:function(){return r},Od:function(){return i},T$:function(){return a}});let{chainId:r}=n(3436).testnetChainInfo,a=void 0,i="https://rpc.xion-testnet-1.burnt.com:443"}},function(e){e.O(0,[350,218,147,228,933,945,969,971,69,744],function(){return e(e.s=96496)}),_N_E=e.O()}]);