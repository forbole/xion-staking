(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{46601:function(){},89214:function(){},42480:function(){},85568:function(){},69386:function(){},31616:function(){},20131:function(){},16026:function(){},33370:function(){},97573:function(t,e,n){"use strict";n.d(e,{I6:function(){return o},WY:function(){return r},h3:function(){return a}});let a=t=>({content:t,type:"SET_POPUP_OPEN_ID"}),r=t=>({content:t,type:"SET_IS_LOADING_BLOCKING"}),o=(t,e)=>{switch(e.type){case"SET_POPUP_OPEN_ID":return{...t,popupOpenId:e.content};case"SET_IS_LOADING_BLOCKING":return{...t,isLoadingBlocking:e.content};default:return t}}},34417:function(t,e,n){"use strict";n.d(e,{W:function(){return r},_:function(){return o}});var a=n(64090);let r={isLoadingBlocking:!1,popupOpenId:null},o=(0,a.createContext)({dispatch:()=>null,state:r})},88197:function(t,e,n){"use strict";n.d(e,{sT:function(){return O},wX:function(){return h},VZ:function(){return y},Dr:function(){return I},qp:function(){return S},_5:function(){return A},xu:function(){return x}});var a=n(22840),r=n(71694),o=n(66803);let i=null,s=async()=>i||(i=(await (0,r.C_)()).staking.validators("BOND_STATUS_BONDED").then(t=>(i=null,t))),l={},u=async t=>{let e=l[t];if(e)return e;let n=(await (0,r.C_)()).staking.validator(t).then(e=>(l[t]=void 0,e.validator));return l[t]=n,n},d=null,c=async()=>d||(d=(await (0,r.C_)()).staking.pool().then(t=>(d=null,t.pool))),g=async t=>{let e=await (0,r.N$)();return await e.getBalance(t,"uxion")},v=async t=>{let e=await (0,r.C_)();return await e.staking.delegatorDelegations(t)},f=async t=>{let e=await (0,r.C_)();return await e.staking.delegatorUnbondingDelegations(t)},w=async(t,e)=>{let n=await (0,r.C_)(),i=await n.distribution.delegationRewards(t,e);return(await Promise.all(i.rewards.map(async t=>{if(0==t.denom.indexOf("ibc/")){var e;let a=await n.ibc.transfer.denomTrace(t.denom.substring(4));t.denom=(null===(e=a.denomTrace)||void 0===e?void 0:e.baseDenom)||t.denom}return t}))).filter(t=>{var e;return(null===(e=t.denom)||void 0===e?void 0:e.toUpperCase())==="UXION"}).map(t=>({amount:new a.Z(t.amount).div(new a.Z(10).pow(18)).toString(),denom:t.denom})).map(t=>(0,o.bI)(t))};var p=n(19807),m=n(62986);let h=async t=>{try{var e,n;t.dispatch((0,m.Kv)(!0));let[a,r]=await Promise.all([s(),c()]);t.dispatch((0,m.T2)({items:a.validators,nextKey:(null===(e=a.pagination)||void 0===e?void 0:e.nextKey)||null,total:(null===(n=a.pagination)||void 0===n?void 0:n.total)||null},!0)),t.dispatch((0,m.DD)(r)),t.dispatch((0,m.Kv)(!1))}catch(t){console.error("error fetching staking data:",t)}},y=async(t,e)=>{try{var n,a,r,i;e.dispatch((0,m.Kv)(!0));let[s,l,u]=await Promise.all([g(t),v(t).then(async e=>({items:await Promise.all(e.delegationResponses.map(async e=>({balance:e.balance,rewards:await w(t,e.delegation.validatorAddress).then(t=>(0,o.HJ)(t)),validatorAddress:e.delegation.validatorAddress}))),pagination:e.pagination})),f(t).then(t=>({items:t.unbondingResponses.reduce((t,e)=>(t.push(...e.entries.map(t=>({balance:{amount:t.balance,denom:"uxion"},completionTime:Number(t.completionTime.seconds),completionTimeNanos:t.completionTime.nanos,id:t.unbondingId.toString(),validator:e.validatorAddress}))),t),[]),pagination:t.pagination})).catch(()=>({items:[],pagination:null})).then(t=>({items:t.items,pagination:t.pagination}))]);e.dispatch((0,m.d0)(s)),e.dispatch((0,m.Qx)({items:l.items,nextKey:(null===(n=l.pagination)||void 0===n?void 0:n.nextKey)||null,total:(null===(a=l.pagination)||void 0===a?void 0:a.total)||null},!0)),e.dispatch((0,m.Kg)({items:u.items,nextKey:(null===(r=u.pagination)||void 0===r?void 0:r.nextKey)||null,total:(null===(i=u.pagination)||void 0===i?void 0:i.total)||null},!0)),e.dispatch((0,m.Kv)(!1))}catch(t){console.error("error fetching staking data:",t)}},A=async(t,e,n,a,r)=>(await (0,p.H0)(t,a,e,n),async()=>{await y(t.delegator,r)}),x=async(t,e,n,a,r)=>(await (0,p.vZ)(t,a,e,n),async()=>{await y(t.delegator,r)}),O=async(t,e,n)=>{await (0,p.YY)(t,e),await y(t.delegator,n)},S=async(t,e)=>{var n,a;if((null===(n=e.state.validatorDetails)||void 0===n?void 0:n.operatorAddress)===t)return e.state.validatorDetails;let r=(null===(a=e.state.validators)||void 0===a?void 0:a.items.find(e=>e.operatorAddress===t))||await u(t);return e.dispatch((0,m.gT)(r)),r},I=async(t,e)=>{var n;let a=e.state.extraValidators[t]||(null===(n=e.state.validators)||void 0===n?void 0:n.items.find(e=>e.operatorAddress===t));if(a)return a;let r=await u(t);return e.dispatch((0,m.N7)({[t]:r,...e.state.extraValidators})),r}},80469:function(t,e,n){"use strict";let a;n.d(e,{f:function(){return d},n:function(){return u}});var r=n(75615),o=n(64090),i=n(88197),s=n(62986),l=n(544);let u=()=>{let t=(0,o.useRef)({}),e=(0,o.useContext)(l.Y);t.current.state=e.state,t.current.dispatch=e.dispatch;let{data:n,isConnected:i}=(0,r.hT)(),s=null==n?void 0:n.bech32Address;return{account:n,address:s,client:i?a:void 0,isConnected:i,staking:t.current}},d=()=>{let{client:t}=(0,r.Hj)(),{address:e,isConnected:n,staking:l}=u();a=n?t:void 0,(0,o.useEffect)(()=>{(0,i.wX)(l)},[l]),(0,o.useEffect)(()=>{if(n&&e)return(0,i.VZ)(e,l),()=>{l.dispatch((0,s.kS)())}},[n,e,l])}},62986:function(t,e,n){"use strict";n.d(e,{DD:function(){return u},I6:function(){return p},Kg:function(){return s},Kv:function(){return r},N7:function(){return g},Qx:function(){return i},T2:function(){return o},ZG:function(){return c},d0:function(){return a},gT:function(){return l},kS:function(){return d}});let a=t=>({content:t,type:"SET_TOKENS"}),r=t=>({content:t,type:"SET_IS_INFO_LOADING"}),o=(t,e)=>({content:t,reset:e,type:"ADD_VALIDATORS"}),i=(t,e)=>({content:t,reset:e,type:"ADD_DELEGATIONS"}),s=(t,e)=>({content:t,reset:e,type:"ADD_UNBONDINGS"}),l=t=>({content:t,type:"SET_VALIDATOR_DETAILS"}),u=t=>({content:t,type:"SET_POOL"}),d=()=>({content:null,type:"LOGOUT"}),c=t=>({content:t,type:"SET_MODAL"}),g=t=>({content:t,type:"SET_EXTRA_VALIDATORS"}),v=t=>{let e=new Set;return t.filter(t=>!e.has(t.operatorAddress)&&(e.add(t.operatorAddress),!0))},f=t=>{let e=new Set;return t.filter(t=>!e.has(t.validatorAddress)&&(e.add(t.validatorAddress),!0))},w=t=>{let e=new Set;return t.filter(t=>{let n=t.id;return!e.has(n)&&(e.add(n),!0)})},p=(t,e)=>{switch(e.type){case"SET_TOKENS":return{...t,tokens:e.content};case"ADD_VALIDATORS":{let n=!e.reset&&t.validators||{items:[],nextKey:null,total:null};return n.total=e.content.total,n.nextKey=e.content.nextKey,n.items=v(n.items.concat(e.content.items)),{...t,validators:n}}case"ADD_DELEGATIONS":{let n=!e.reset&&t.delegations||{items:[],nextKey:null,total:null};return n.total=e.content.total,n.nextKey=e.content.nextKey,n.items=f(e.content.items.concat(n.items)),{...t,delegations:n}}case"ADD_UNBONDINGS":{let n=!e.reset&&t.unbondings||{items:[],nextKey:null,total:null};return n.total=e.content.total,n.nextKey=e.content.nextKey,n.items=w(e.content.items.concat(n.items)),{...t,unbondings:n}}case"SET_IS_INFO_LOADING":return{...t,isInfoLoading:e.content};case"SET_VALIDATOR_DETAILS":return{...t,validatorDetails:e.content};case"SET_POOL":return{...t,pool:e.content};case"SET_MODAL":return{...t,modal:e.content};case"LOGOUT":return{...t,delegations:null,unbondings:null,validators:null};case"SET_EXTRA_VALIDATORS":return{...t,extraValidators:e.content};default:return t}}},544:function(t,e,n){"use strict";n.d(e,{W:function(){return r},Y:function(){return o}});var a=n(64090);let r={delegations:null,extraValidators:{},isInfoLoading:!1,modal:null,pool:null,tokens:null,unbondings:null,validatorDetails:null,validators:null},o=(0,a.createContext)({dispatch:()=>null,state:r})},71694:function(t,e,n){"use strict";let a,r;n.d(e,{C_:function(){return u},N$:function(){return d},v4:function(){return c}});var o=n(18722),i=n(58015),s=n(43890),l=n(9016);let u=()=>(a||(a=(async()=>{let t=await s.Tendermint34Client.connect(l.Od);return i.QueryClient.withExtensions(t,i.setupStakingExtension,i.setupDistributionExtension,i.setupIbcExtension)})()),a),d=()=>(r||(r=(async()=>await i.StargateClient.connect(l.Od))()),r),c=async()=>{let t=localStorage.getItem("xion-authz-temp-account");if(!t)return;let e=await o.DirectSecp256k1HdWallet.deserialize(t,"abstraxion"),n=await e.getAccounts().then(t=>{var e;return null===(e=t[0])||void 0===e?void 0:e.address});return{client:await i.SigningStargateClient.connectWithSigner(l.Od,e),granteeAddress:n}}},66803:function(t,e,n){"use strict";n.d(e,{HJ:function(){return d},IB:function(){return o},Jp:function(){return i},UO:function(){return s},bI:function(){return r},bP:function(){return u},kw:function(){return l}});var a=n(22840);let r=t=>{var e,n,r;return(null===(e=t.denom)||void 0===e?void 0:e.toUpperCase())==="UXION"?{amount:new a.Z(t.amount).div(new a.Z(10).pow(6)).toString(),denom:"XION"}:(null===(n=t.denom)||void 0===n?void 0:n.toUpperCase())==="XION"?{amount:t.amount,denom:"XION"}:{...t,denom:null===(r=t.denom)||void 0===r?void 0:r.toUpperCase()}},o=()=>({amount:"0",denom:"XION"}),i=t=>({amount:t.toString(),denom:"XION"}),s=t=>t&&new a.Z(t.amount).gt(0),l=t=>({amount:t.div(new a.Z(10).pow(6)).toString(),denom:"XION"}),u=t=>({amount:t.times(new a.Z(10).pow(6)).toString(),denom:"UXION"}),d=t=>t.reduce((t,e)=>({amount:new a.Z(t.amount).plus(r(e).amount).toString(),denom:t.denom}),o())},9016:function(t,e,n){"use strict";n.d(e,{Ex:function(){return s},Jg:function(){return a},Od:function(){return o},T$:function(){return r},c1:function(){return l},sb:function(){return i}});let a=!0,r=void 0,o="https://rpc.xion-testnet.forbole.com",i="/xion-staking",s=10,l="".concat(i,"/default-avatar.svg")},77658:function(t,e,n){"use strict";n.d(e,{BR:function(){return r},GI:function(){return l},Sf:function(){return a},cx:function(){return s},gU:function(){return o},kC:function(){return i}});let a='<svg width="9" height="5" viewBox="0 0 9 5" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.24264 4.24264L8.48528 0H0L4.24264 4.24264Z" fill="#F2F2F2"/></svg>',r='<svg width="15" height="17" viewBox="0 0 15 17" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4.71289" y="4.71094" width="9.16672" height="11.5371" stroke="white" stroke-width="1.5"/><path d="M1 12.2593V2C1 1.44772 1.44772 1 2 1H11.0741" stroke="white" stroke-width="1.5"/></svg>',o='<svg width="20" height="17" viewBox="0 0 20 17" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" y="0.5" width="17.2353" height="11.9412" rx="1.5" stroke="white"/><path d="M0.5 14.1176V3.75012C0.503887 3.7521 0.507782 3.75406 0.511683 3.75601C1.06022 4.03029 1.7516 4.0298 2.29374 4.02942C2.31368 4.02941 2.33342 4.0294 2.35294 4.0294H17.6471C18.6704 4.0294 19.5 4.85899 19.5 5.88234V14.1176C19.5 15.141 18.6704 15.9706 17.6471 15.9706H2.35294C1.32959 15.9706 0.5 15.141 0.5 14.1176Z" fill="black" stroke="white"/><line x1="3.5293" y1="7.14746" x2="15.8822" y2="7.14746" stroke="white"/></svg>',i='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.941 6L12 10.941L7.059 6L6 7.05975L10.941 12L6 16.941L7.059 18L12 13.059L16.941 18L18 16.941L13.059 12L18 7.05975L16.941 6Z" fill="#6C6A6A"/></svg>',s='<svg width="11" height="7" viewBox="0 0 11 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.00003 6.24271L5.24268 2.00007L9.48532 6.24271" stroke="#F2F2F2" stroke-width="1.5"/></svg>',l='<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="16" cy="16" r="15.5" stroke="white" stroke-opacity="0.2"/> <circle cx="16" cy="10" r="2" fill="#6C6A6A"/> <circle cx="16" cy="16" r="2" fill="#6C6A6A"/> <circle cx="16" cy="22" r="2" fill="#6C6A6A"/> </svg>'},19807:function(t,e,n){"use strict";n.d(e,{YY:function(){return m},sj:function(){return h},H0:function(){return w},vZ:function(){return p}});var a=n(22840),r=n(53856),o=n(62884),i=n(66803),s=n(97481),l=n(71694);let u=async(t,e)=>{let{client:n,granteeAddress:a}=await (0,l.v4)()||{};if(!n||!a)return null;let r=[{typeUrl:"/cosmos.authz.v1beta1.MsgExec",value:s.MsgExec.fromPartial({grantee:a,msgs:t.map(t=>n.registry.encodeAsAny(t))})}];return await n.simulate(a,r,e).then(t=>Math.ceil(2*t).toString()).catch(t=>(console.log("debug: core/base.ts: Estimate error",t),null))},d=async t=>{let{address:e,amount:n=[{amount:"1000",denom:"uxion"}],gasLimit:a="400000",memo:r="",msgs:o}=t;return{amount:n,gas:await u(o,r)||a,granter:e}},c=t=>({amount:t.amount,denom:["UXION","XION"].includes(t.denom.toUpperCase())?t.denom.toLowerCase():t.denom}),g=t=>{if("UXION"===t.denom.toUpperCase())return c(t);if("XION"===t.denom.toUpperCase())return c((0,i.bP)(new a.Z(t.amount)));throw Error("Invalid coin denom")},v=t=>e=>{if(console.log("debug: base.ts: result",e),!e.events.find(e=>e.type===t))throw console.error(e),Error("Out of gas");return e},f=t=>{throw console.error(t),t},w=async(t,e,n,a)=>{let r=g(n),i={typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:o.MsgDelegate.fromPartial({amount:r,delegatorAddress:t.delegator,validatorAddress:t.validator})},s=await d({address:t.delegator,memo:a,msgs:[i]});return await e.signAndBroadcast(t.delegator,[i],s,a).then(v("delegate")).catch(f)},p=async(t,e,n,a)=>{let r=g(n),i={typeUrl:"/cosmos.staking.v1beta1.MsgUndelegate",value:o.MsgUndelegate.fromPartial({amount:r,delegatorAddress:t.delegator,validatorAddress:t.validator})},s=await d({address:t.delegator,memo:a,msgs:[i]});return await e.signAndBroadcast(t.delegator,[i],s,a).then(v("unbond")).catch(f)},m=async(t,e)=>{let n=[{typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:r.MsgWithdrawDelegatorReward.fromPartial({delegatorAddress:t.delegator,validatorAddress:t.validator})}],a=await d({address:t.delegator,msgs:n});return await e.signAndBroadcast(t.delegator,n,a).then(v("withdraw_rewards")).catch(f)},h=t=>{let e=(0,i.bI)(t);return new a.Z(e.amount).gte(1e-4)}}}]);